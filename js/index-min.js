const moduloBJ=(()=>{"use strict";let e=[],f=[],g=["C","D","H","S"],h=["J","Q","K","A"],i=document.querySelectorAll("small"),j=document.querySelectorAll(".divCartas"),a=document.querySelector("#btnPedir"),b=document.querySelector("#btnDetener"),c=document.querySelector("#btnNuevo"),k=document.querySelector("#mensaje"),d=(d=2)=>{l(),e=[];for(let c=0;c<d;c++)e.push(0);i.forEach(a=>a.textContent=0),k.innerHTML="",k.classList.remove("mensaje-ganador"),k.classList.remove("mensaje-perdedor"),k.classList.remove("mensaje-empate"),j.forEach(a=>a.innerHTML=""),b.disabled=!1,a.disabled=!1},l=()=>{f=[];for(let a=2;a<10;a++)for(let b of g)f.push(a+b);for(let c of g)for(let d of h)f.push(d+c);return f.sort((a,b)=>.5-Math.random())},m=()=>{if(0===f.length)throw"No hay cartas en el deck";return f.pop()},n=b=>{let a=b.substring(0,b.length-1);return isNaN(a)?"A"===a?11:10:1*a},o=()=>{k.classList.add("mensaje-ganador");let a=document.createElement("p");a.classList.add("texto"),a.textContent="\xa1Enhorabuena haz ganado!",k.append(a)},p=()=>{k.classList.add("mensaje-perdedor");let a=document.createElement("p");a.classList.add("texto"),a.textContent="Gana la consola, intentalo de nuevo...",k.append(a)},q=()=>{k.classList.add("mensaje-empate");let a=document.createElement("p");a.classList.add("texto"),a.textContent="Ha habido un empate...",k.append(a)},r=(b,a)=>(e[a]=e[a]+n(b),i[a].textContent=e[a],e[a]),s=(b,c)=>{let a=document.createElement("img");a.src=`/src/cartas/${b}.png`,a.classList.add("card"),j[c].append(a)},t=()=>{let[a,b]=e;setTimeout(()=>{b===a?q():a>21?p():b>21?o():p()},30)},u=a=>{let b=0;do{let c=m();b=r(m(),e.length-1),s(c,e.length-1)}while(b<a&&a<=21)t()};return a.addEventListener("click",()=>{let c=m(),d=r(c,0);s(c,0),e[0]>21?(console.warn("Haz perdido colega"),a.disabled=!0,b.disabled=!0,u(d)):21===e[0]&&(console.warn("21 Genial"),a.disabled=!0,b.disabled=!0,u(d))}),b.addEventListener("click",()=>{b.disabled=!0,a.disabled=!0,u(e[0])}),c.addEventListener("click",()=>{d()}),{nuevoJuego:d}})()

